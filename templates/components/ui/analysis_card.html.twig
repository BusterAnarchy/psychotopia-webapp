{% set desc_open = description_open is defined ? description_open : true %}

{% set body_content = body_content is defined ? body_content : null %}
{% if body_template is defined and body_template %}
    {% set body_content = include(body_template, body_context|default({})) %}
{% endif %}

<article
    id="card-{{ embed_chart }}"

    class="analysis-card has-description"
    data-analysis-card
    data-card-title="{{ title }}" 
    data-embed-chart="{{ embed_chart }}"
>
    <header class="analysis-card__head">
        <h3 class="analysis-card__title">{{ title }}</h3>
    </header>

    <div class="analysis-card__body">     
        <div class="analysis-card__main">
            {{ body_content|raw }}
        </div>

        <aside
            class="analysis-card__desc-panel is-open"
            data-card-description
        >
            <div class="analysis-card__desc-content" data-card-description-content>
                {{ description | raw }}
            </div>
        </aside>
    </div>
</article>
